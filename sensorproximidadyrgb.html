[accordion_item title="Sensor Proximidad y RGB"]

<p>Vamos a utilizar el LED RGB para mostrar distintos colores segun la proximidad de un objeto al sensor.</p>
<p>Empezamos por analizar el esquematico de ambos desafios y notar los pines que se ultilizan:</p>
Empezamos por analizar el hardware, que sera lo mas determinante, por que podemos encontrarnos con PINS fisicos del Arduino que estan siendo utilizados para distintas cosas y tengamos que modificar alguna conexion.

<h3>Sensor proximidad</h3>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensor_proximidad.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensor_proximidad.png" alt="Sensor Proximidad" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Vemos que utiliza 5V y GND para alimentar el sensor y los pins 8 y 7 para transmitir los datos.</p>

<h3>RGB LED</h3>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/rgbled.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/rgbled.png" alt="RGB Led" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Utiliza 5V para alimentar el LED y los pins digitales para controlar los colores 13 (rojo), 12 (verde) y 11 (azul).<br>
No tenemos ninguna moficicacion que hacer en ese frente, no hay conflictos, vamos a combinar los esquematicos:<br>
Empezamos haciendo a un lado el Sensor, en lugar de conectar 5V y GND del Arduino, al sensor, vamos a conectarlos al protoboard y de alli llevarlos al sensor.</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensorproximidadyrgb_0.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensorproximidadyrgb_0.png" alt="Sensor Proximidad y RGB 0" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>De esta forma nos queda lugar para colocar el LED RGB, conectaremos la pata mas larga (positiva en nuestro caso) a 5V y los otros pins a sus correspondientes pins digitales (13, 12 y 11)</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensorproximidadyrgb_1.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensorproximidadyrgb_1.png" alt="Sensor Proximidad y RGB 1" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Con esto la parte del hardware deberia estar resuelta.<br>
Vamos ahora a ver los sketches de los desafios:</p>

<h3>Sensor proximidad</h3>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensor_proximidad_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/sensor_proximidad_sections.png" alt="Sensor Proximidad Secciones" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>La estructura de este desafio tiene una particularidad y es que define una funcion auxiliar, esta funcion auxiliar es utilizada dentro del loop y su finalidad es calcular la distancia en centimetros basandose en el tiempo que tardo el ultrasonido en captar el rebote de la onda emitida.</p>

<h3>RGB Led</h3>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/rgbled_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/rgbled_sections.png" alt="RGB Led Secciones" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Este desafio tiene la estructura basica, definicion de variables, setup y loop.<br>
Vamos a comenzar con un sketch vacio:</p>

<h3>Nuevo Sketch</h3>

<p>Comenzamos con un nuevo sketch:</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_0_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_0_sections.png" alt="New Sketch 0" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Vamos a copiar primero las definiciones de variables de ambos desafios al nuevo sketch.</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_1_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_1_sections.png" alt="New Sketch 1" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Ahora vamos a copiar los setups de ambos desafios en el nuevo sketch:</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_2_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_2_sections.png" alt="New Sketch 2" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>A continuacion vamos a copiar los loop al nuevo sketch.</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_3_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_3_sections.png" alt="New Sketch 3" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>En la imagen pusimos solo los case 0 y 6 para que no sea tan extenso el c칩digo, al momento de llevar esto a la practica, debemos copiar todo el loop.<br>
Ahora vamos a hacer unos peque침os ajustes al c칩digo para lograr nuestro cometido.<br>
Vamos a eliminar el ultimo delay que copiamos del loop del sensor de proximidad<br>
y tambien vamos a cambiar la primer linea del loop del RGB:<br>
No queremos utilizar la aleatoriedad (random) para elegir el color que queremos mostrar, vamos a utilizar el valor que retorna la funcion microsecondsToCentimeters para calcular el color.<br>
Para esto vamos a utilizar la funcion map en lugar de random para obtener el valor de la variable colorLed.</p>

[boxes]
  [boxcontent color="success" type="5" title="Consejos" icon="fa-info"]
    <p>Explicar como y para que se utiliza la funcion map</p>
  [/boxcontent]
[/boxes]

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_4_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_4_sections.png" alt="New Sketch 4" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>Lo unico que nos falta ahora es copiar la funcion auxiliar del sensor de proximidad y agregarla al final del nuevo sketch:</p>

<p style="text-align: center;">
  <a href="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_5_sections.png" target="_blank" rel="noreferrer noopener">
    <img src="https://educacion.camba.coop/pluginfile.php/160/mod_folder/content/0/combinar_desafios/sensorproximidadyrgb/newsketch_5_sections.png" alt="New Sketch 5" width="800" height="534" class="atto_image_button_text-bottom"></a>
</p>

<p>El c칩digo resultante deberia ser algo asi:</p>

```
<div class="codigoSensorproximidadyrgb">LOADING...</div>
```
<p>
[columns] [column size="4"] [button link="https://gitlab.camba.coop/educacion/combinar-desafios/tree/master/sensorproximidadyrgb" type="primary" icon="fa-github" fw="0" target="_blank" rel="noopener noreferrer"]Ver repo[/button] [/column] [column size="4"][/column]
[column size="4"][/column] [/columns] [gap size="10"][/gap] [line][/line] [/accordion_item]
